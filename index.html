<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Cash Cruise: Cuteness Overload!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Neue', cursive;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }

        body {
            overflow: hidden;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Comic Neue', cursive;
            touch-action: manipulation;
        }

        .game-container {
            width: 100%;
            height: 100vh;
            position: relative;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F7FA 100%);
            box-shadow: 0 0 30px rgba(0,0,0,0.2);
        }

        /* Start Screen */
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            z-index: 100;
            transition: all 0.5s ease;
            padding: 20px;
        }

        .game-title {
            font-size: clamp(2rem, 8vw, 3rem);
            font-weight: bold;
            color: #FF6B6B;
            text-shadow: 3px 3px 0 #FFF, 6px 6px 0 rgba(0,0,0,0.1);
            margin-bottom: 20px;
            animation: bounce 2s infinite;
            text-align: center;
        }

        .game-subtitle {
            font-size: clamp(0.9rem, 4vw, 1.2rem);
            color: #FFF;
            margin-bottom: 40px;
            text-align: center;
            padding: 0 20px;
            line-height: 1.4;
        }

        .play-button {
            background: linear-gradient(135deg, #6A11CB 0%, #2575FC 100%);
            color: white;
            border: none;
            padding: clamp(15px, 4vw, 18px) clamp(30px, 8vw, 40px);
            font-size: clamp(1.2rem, 5vw, 1.5rem);
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-weight: bold;
            min-width: 200px;
        }

        .play-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 20px rgba(0,0,0,0.3);
        }

        .play-button:active {
            transform: translateY(-2px);
        }

        /* Game Screen */
        .game-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: clamp(10px, 3vw, 15px) clamp(15px, 4vw, 20px);
            background: rgba(255,255,255,0.8);
            border-bottom: 2px dashed #FF9AA2;
            z-index: 10;
        }

        .score-container {
            display: flex;
            align-items: center;
            background: #FFD166;
            padding: clamp(6px, 2vw, 8px) clamp(12px, 3vw, 15px);
            border-radius: 30px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .score-icon {
            color: #FF6B6B;
            margin-right: clamp(6px, 2vw, 8px);
            font-size: clamp(1rem, 4vw, 1.2rem);
        }

        .score {
            font-size: clamp(1rem, 4vw, 1.2rem);
            font-weight: bold;
            color: #333;
        }

        .lives-container {
            display: flex;
            align-items: center;
        }

        .heart {
            color: #FF6B6B;
            font-size: clamp(1.2rem, 5vw, 1.5rem);
            margin-left: clamp(4px, 1.5vw, 5px);
            animation: heartbeat 1.5s infinite;
        }

        .game-area {
            flex: 1;
            position: relative;
            overflow: hidden;
            outline: none;
            cursor: pointer;
            min-height: 0;
        }

        .road {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: clamp(150px, 25vh, 200px);
            background: #555;
            border-top: 5px dashed #FFD700;
            z-index: 1;
        }

        .car {
            position: absolute;
            bottom: clamp(20px, 4vh, 30px);
            left: 50%;
            transform: translateX(-50%);
            width: clamp(60px, 15vw, 80px);
            height: clamp(60px, 15vw, 80px);
            background: #FF6B6B;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            z-index: 5;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: left 0.1s ease;
        }

        .car::before {
            content: "";
            position: absolute;
            bottom: clamp(-8px, -2vw, -10px);
            left: 50%;
            transform: translateX(-50%);
            width: clamp(80px, 20vw, 100px);
            height: clamp(15px, 3vw, 20px);
            background: #333;
            border-radius: 10px;
            z-index: -1;
        }

        .car::after {
            content: "ðŸš—";
            font-size: clamp(2rem, 7vw, 3rem);
        }

        .money {
            position: absolute;
            width: clamp(40px, 10vw, 50px);
            height: clamp(40px, 10vw, 50px);
            background: #FFD700;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(1.4rem, 5vw, 1.8rem);
            z-index: 3;
            animation: fall linear;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }

        .obstacle {
            position: absolute;
            width: clamp(45px, 12vw, 60px);
            height: clamp(45px, 12vw, 60px);
            background: #FF6B6B;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(1.5rem, 5.5vw, 2rem);
            z-index: 3;
            animation: fall linear;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }

        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            z-index: 0;
        }

        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50%;
        }

        .cloud1 {
            width: clamp(70px, 20vw, 100px);
            height: clamp(30px, 8vw, 40px);
            top: 20%;
            left: 20%;
            animation: float 20s infinite;
        }

        .cloud1::before {
            width: clamp(35px, 10vw, 50px);
            height: clamp(35px, 10vw, 50px);
            top: clamp(-18px, -5vw, -25px);
            left: 10px;
        }

        .cloud1::after {
            width: clamp(40px, 12vw, 60px);
            height: clamp(30px, 8vw, 40px);
            top: clamp(-10px, -3vw, -15px);
            right: 10px;
        }

        .cloud2 {
            width: clamp(60px, 18vw, 80px);
            height: clamp(25px, 7vw, 30px);
            top: 40%;
            right: 30%;
            animation: float 25s infinite;
        }

        .cloud2::before {
            width: clamp(30px, 8vw, 40px);
            height: clamp(30px, 8vw, 40px);
            top: clamp(-15px, -4vw, -20px);
            left: 15px;
        }

        .cloud2::after {
            width: clamp(35px, 10vw, 50px);
            height: clamp(25px, 7vw, 30px);
            top: clamp(-8px, -2vw, -10px);
            right: 15px;
        }

        /* Game Over Screen */
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.8);
            z-index: 200;
            padding: 20px;
        }

        .game-over-title {
            font-size: clamp(2rem, 8vw, 2.5rem);
            color: #FF6B6B;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0 #FFF;
            text-align: center;
        }

        .final-score {
            font-size: clamp(1.5rem, 6vw, 1.8rem);
            color: #FFD166;
            margin-bottom: 30px;
            text-align: center;
        }

        .restart-button {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF9AA2 100%);
            color: white;
            border: none;
            padding: clamp(12px, 3vw, 15px) clamp(25px, 6vw, 30px);
            font-size: clamp(1.1rem, 4.5vw, 1.3rem);
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-weight: bold;
            min-width: 180px;
        }

        .restart-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 20px rgba(0,0,0,0.3);
        }

        /* Controls */
        .controls {
            position: absolute;
            bottom: clamp(15px, 4vh, 20px);
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 clamp(20px, 5vw, 30px);
            z-index: 10;
        }

        .control-button {
            width: clamp(60px, 15vw, 70px);
            height: clamp(60px, 15vw, 70px);
            border-radius: 50%;
            background: rgba(255,255,255,0.7);
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(1.5rem, 5vw, 2rem);
            color: #FF6B6B;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.2s ease;
            -webkit-tap-highlight-color: transparent;
        }

        .control-button:active {
            transform: scale(0.95);
            background: rgba(255,255,255,0.9);
        }

        .control-button.pressed {
            background: rgba(255,107,107,0.8);
            transform: scale(0.9);
        }

        /* Difficulty Indicator */
        .difficulty-indicator {
            position: absolute;
            top: clamp(70px, 12vh, 80px);
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.8);
            padding: clamp(4px, 1vw, 5px) clamp(12px, 3vw, 15px);
            border-radius: 20px;
            font-size: clamp(0.8rem, 3vw, 0.9rem);
            color: #FF6B6B;
            font-weight: bold;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
        }

        .difficulty-indicator.show {
            opacity: 1;
        }

        /* Instructions */
        .instructions {
            position: absolute;
            bottom: clamp(80px, 15vh, 100px);
            left: 0;
            width: 100%;
            text-align: center;
            color: #555;
            font-size: clamp(0.8rem, 3vw, 0.9rem);
            padding: 0 20px;
            line-height: 1.4;
        }

        /* Animations */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        @keyframes float {
            0% { transform: translateX(0); }
            50% { transform: translateX(30px); }
            100% { transform: translateX(0); }
        }

        @keyframes fall {
            from { top: -60px; }
            to { top: 100%; }
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .game-container {
                max-width: 100%;
            }
            
            .controls {
                padding: 0 15px;
            }
            
            .control-button {
                width: 55px;
                height: 55px;
                font-size: 1.4rem;
            }
        }

        @media (max-height: 600px) {
            .road {
                height: 120px;
            }
            
            .car {
                bottom: 15px;
            }
            
            .controls {
                bottom: 10px;
            }
        }

        /* Landscape mode adjustments */
        @media (orientation: landscape) and (max-height: 500px) {
            .game-header {
                padding: 8px 15px;
            }
            
            .score-container {
                padding: 4px 10px;
            }
            
            .heart {
                font-size: 1.2rem;
                margin-left: 3px;
            }
            
            .road {
                height: 100px;
            }
            
            .car {
                bottom: 10px;
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
            
            .car::after {
                font-size: 1.8rem;
            }
            
            .controls {
                bottom: 5px;
                padding: 0 15px;
            }
            
            .control-button {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Start Screen -->
        <div class="start-screen" id="startScreen">
            <h1 class="game-title">Cash Cruise!</h1>
            <p class="game-subtitle">Drive your cute car to collect money and avoid obstacles!</p>
            <button class="play-button" id="playButton">PLAY NOW</button>
            <div class="instructions">
                <p>Hold the buttons to move â€¢ Collect money to increase difficulty!</p>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="game-screen" id="gameScreen">
            <div class="game-header">
                <div class="score-container">
                    <i class="fas fa-coins score-icon"></i>
                    <span class="score" id="score">0</span>
                </div>
                <div class="lives-container">
                    <i class="fas fa-heart heart" id="life1"></i>
                    <i class="fas fa-heart heart" id="life2"></i>
                    <i class="fas fa-heart heart" id="life3"></i>
                </div>
            </div>
            
            <div class="difficulty-indicator" id="difficultyIndicator">
                <i class="fas fa-fire"></i> Difficulty Increased!
            </div>
            
            <div class="game-area" id="gameArea" tabindex="0">
                <div class="cloud cloud1"></div>
                <div class="cloud cloud2"></div>
                <div class="road"></div>
                <div class="car" id="car"></div>
            </div>
            
            <div class="controls">
                <button class="control-button" id="leftBtn"><i class="fas fa-chevron-left"></i></button>
                <button class="control-button" id="rightBtn"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div class="game-over" id="gameOver">
            <h2 class="game-over-title">Game Over!</h2>
            <p class="final-score">Your Score: <span id="finalScore">0</span></p>
            <button class="restart-button" id="restartButton">Play Again</button>
        </div>
    </div>

    <script>
        // Game variables
        let score = 0;
        let lives = 3;
        let gameActive = false;
        let carPosition = 50; // percentage
        let gameSpeed = 3;
        let spawnRate = 1000; // milliseconds
        let lastSpawnTime = 0;
        let gameObjects = [];
        let gameAreaWidth;
        let carWidth = 80;
        let lastDifficultyLevel = 0;
        
        // Movement variables
        let moveInterval = null;
        let moveSpeed = 50; // milliseconds between moves when holding
        let moveStep = 2; // percentage per move when holding
        
        // DOM elements
        const startScreen = document.getElementById('startScreen');
        const gameScreen = document.getElementById('gameScreen');
        const gameOverScreen = document.getElementById('gameOver');
        const playButton = document.getElementById('playButton');
        const restartButton = document.getElementById('restartButton');
        const scoreElement = document.getElementById('score');
        const finalScoreElement = document.getElementById('finalScore');
        const car = document.getElementById('car');
        const gameArea = document.getElementById('gameArea');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        const difficultyIndicator = document.getElementById('difficultyIndicator');
        const lifeElements = [
            document.getElementById('life1'),
            document.getElementById('life2'),
            document.getElementById('life3')
        ];
        
        // Initialize game
        function initGame() {
            gameAreaWidth = gameArea.offsetWidth;
            carPosition = 50;
            score = 0;
            lives = 3;
            gameSpeed = 3;
            spawnRate = 1000;
            lastDifficultyLevel = 0;
            gameObjects = [];
            updateScore();
            updateLives();
            updateCarPosition();
            
            // Clear any existing game objects
            document.querySelectorAll('.money, .obstacle').forEach(obj => obj.remove());
        }
        
        // Start game
        function startGame() {
            initGame();
            startScreen.style.display = 'none';
            gameScreen.style.display = 'flex';
            gameOverScreen.style.display = 'none';
            gameActive = true;
            gameArea.focus();
            gameLoop();
        }
        
        // Game over
        function endGame() {
            gameActive = false;
            finalScoreElement.textContent = score;
            gameScreen.style.display = 'none';
            gameOverScreen.style.display = 'flex';
        }
        
        // Update score display
        function updateScore() {
            scoreElement.textContent = score;
        }
        
        // Update lives display
        function updateLives() {
            lifeElements.forEach((heart, index) => {
                if (index < lives) {
                    heart.style.opacity = '1';
                } else {
                    heart.style.opacity = '0.3';
                }
            });
        }
        
        // Update car position
        function updateCarPosition() {
            car.style.left = `${carPosition}%`;
        }
        
        // Move car left
        function moveCarLeft(step = 10) {
            if (carPosition > 10) {
                carPosition -= step;
                updateCarPosition();
            }
        }
        
        // Move car right
        function moveCarRight(step = 10) {
            if (carPosition < 90) {
                carPosition += step;
                updateCarPosition();
            }
        }
        
        // Start continuous movement
        function startMoving(direction) {
            // Clear any existing interval
            if (moveInterval) {
                clearInterval(moveInterval);
            }
            
            // Move immediately
            if (direction === 'left') {
                moveCarLeft();
            } else {
                moveCarRight();
            }
            
            // Set interval for continuous movement
            moveInterval = setInterval(() => {
                if (direction === 'left') {
                    moveCarLeft(moveStep);
                } else {
                    moveCarRight(moveStep);
                }
            }, moveSpeed);
        }
        
        // Stop continuous movement
        function stopMoving() {
            if (moveInterval) {
                clearInterval(moveInterval);
                moveInterval = null;
            }
        }
        
        // Create game object (money or obstacle)
        function createGameObject() {
            const isMoney = Math.random() > 0.3; // 70% chance of money, 30% obstacle
            const object = document.createElement('div');
            object.className = isMoney ? 'money' : 'obstacle';
            
            // Random horizontal position
            const position = Math.random() * 80 + 10; // 10% to 90%
            object.style.left = `${position}%`;
            
            // Set content
            if (isMoney) {
                const moneyTypes = ['ðŸ’°', 'ðŸ’Ž', 'ðŸ’µ', 'ðŸª™'];
                object.textContent = moneyTypes[Math.floor(Math.random() * moneyTypes.length)];
            } else {
                const obstacleTypes = ['ðŸš§', 'ðŸª¨', 'ðŸ•³ï¸', 'ðŸŒªï¸'];
                object.textContent = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
            }
            
            // Set animation duration based on game speed
            object.style.animationDuration = `${5 / gameSpeed}s`;
            
            gameArea.appendChild(object);
            gameObjects.push({
                element: object,
                x: position,
                isMoney: isMoney,
                passed: false
            });
        }
        
        // Check collisions
        function checkCollisions() {
            const carRect = car.getBoundingClientRect();
            
            gameObjects.forEach((obj, index) => {
                const objRect = obj.element.getBoundingClientRect();
                
                // Check if object is within car area
                if (
                    objRect.bottom > carRect.top &&
                    objRect.top < carRect.bottom &&
                    objRect.right > carRect.left &&
                    objRect.left < carRect.right
                ) {
                    // Collision detected
                    if (obj.isMoney) {
                        // Collect money
                        score += 10;
                        updateScore();
                        
                        // Visual feedback
                        obj.element.style.transform = 'scale(1.5)';
                        obj.element.style.opacity = '0';
                        
                        // Remove object after animation
                        setTimeout(() => {
                            obj.element.remove();
                        }, 200);
                    } else {
                        // Hit obstacle
                        lives--;
                        updateLives();
                        
                        // Visual feedback
                        obj.element.style.transform = 'scale(1.5)';
                        obj.element.style.opacity = '0';
                        
                        // Remove object after animation
                        setTimeout(() => {
                            obj.element.remove();
                        }, 200);
                        
                        // Check if game over
                        if (lives <= 0) {
                            endGame();
                        }
                    }
                    
                    // Remove from game objects array
                    gameObjects.splice(index, 1);
                } else if (objRect.top > window.innerHeight) {
                    // Object passed without collision
                    if (!obj.passed && !obj.isMoney) {
                        // If obstacle passed without collision, give points
                        score += 5;
                        updateScore();
                        obj.passed = true;
                    }
                    
                    // Remove object that's off screen
                    obj.element.remove();
                    gameObjects.splice(index, 1);
                }
            });
        }
        
        // Update difficulty based on score
        function updateDifficulty() {
            const currentDifficultyLevel = Math.floor(score / 50);
            
            if (currentDifficultyLevel > lastDifficultyLevel) {
                lastDifficultyLevel = currentDifficultyLevel;
                
                // Increase game speed
                if (gameSpeed < 10) {
                    gameSpeed += 0.5;
                }
                
                // Decrease spawn rate (more frequent spawning)
                if (spawnRate > 300) {
                    spawnRate -= 50;
                }
                
                // Show difficulty indicator
                difficultyIndicator.classList.add('show');
                setTimeout(() => {
                    difficultyIndicator.classList.remove('show');
                }, 2000);
                
                // Update animation speeds for existing objects
                gameObjects.forEach(obj => {
                    obj.element.style.animationDuration = `${5 / gameSpeed}s`;
                });
            }
        }
        
        // Game loop
        function gameLoop(timestamp) {
            if (!gameActive) return;
            
            // Spawn new objects
            if (!timestamp || timestamp - lastSpawnTime > spawnRate) {
                createGameObject();
                lastSpawnTime = timestamp || 0;
            }
            
            // Check collisions
            checkCollisions();
            
            // Update difficulty based on score
            updateDifficulty();
            
            // Continue game loop
            requestAnimationFrame(gameLoop);
        }
        
        // Event listeners
        playButton.addEventListener('click', startGame);
        restartButton.addEventListener('click', startGame);
        
        // Touch controls with hold functionality
        leftBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            leftBtn.classList.add('pressed');
            startMoving('left');
        });
        
        leftBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            leftBtn.classList.remove('pressed');
            stopMoving();
        });
        
        leftBtn.addEventListener('touchcancel', (e) => {
            e.preventDefault();
            leftBtn.classList.remove('pressed');
            stopMoving();
        });
        
        rightBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            rightBtn.classList.add('pressed');
            startMoving('right');
        });
        
        rightBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            rightBtn.classList.remove('pressed');
            stopMoving();
        });
        
        rightBtn.addEventListener('touchcancel', (e) => {
            e.preventDefault();
            rightBtn.classList.remove('pressed');
            stopMoving();
        });
        
        // Mouse controls with hold functionality
        leftBtn.addEventListener('mousedown', (e) => {
            e.preventDefault();
            leftBtn.classList.add('pressed');
            startMoving('left');
        });
        
        leftBtn.addEventListener('mouseup', (e) => {
            e.preventDefault();
            leftBtn.classList.remove('pressed');
            stopMoving();
        });
        
        leftBtn.addEventListener('mouseleave', (e) => {
            e.preventDefault();
            leftBtn.classList.remove('pressed');
            stopMoving();
        });
        
        rightBtn.addEventListener('mousedown', (e) => {
            e.preventDefault();
            rightBtn.classList.add('pressed');
            startMoving('right');
        });
        
        rightBtn.addEventListener('mouseup', (e) => {
            e.preventDefault();
            rightBtn.classList.remove('pressed');
            stopMoving();
        });
        
        rightBtn.addEventListener('mouseleave', (e) => {
            e.preventDefault();
            rightBtn.classList.remove('pressed');
            stopMoving();
        });
        
        // Keyboard controls for arrow keys
        document.addEventListener('keydown', (e) => {
            if (!gameActive) return;
            
            if (e.key === 'ArrowLeft') {
                e.preventDefault();
                if (!moveInterval) {
                    startMoving('left');
                }
            } else if (e.key === 'ArrowRight') {
                e.preventDefault();
                if (!moveInterval) {
                    startMoving('right');
                }
            }
        });
        
        document.addEventListener('keyup', (e) => {
            if (!gameActive) return;
            
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                e.preventDefault();
                stopMoving();
            }
        });
        
        // Touch controls for swiping
        let touchStartX = 0;
        let touchEndX = 0;
        
        gameArea.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        gameArea.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            if (touchEndX < touchStartX - 50) {
                moveCarLeft();
            }
            if (touchEndX > touchStartX + 50) {
                moveCarRight();
            }
        }
        
        // Make game area clickable to focus
        gameArea.addEventListener('click', () => {
            gameArea.focus();
        });
        
        // Prevent zoom on double tap
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
